<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡¨æ ¼è°ƒè¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #2c3e50; color: white; }
        table { width: 100%; border-collapse: separate; border-spacing: 2px; }
        td { 
            background: #34495e; 
            color: white; 
            padding: 10px; 
            text-align: center; 
            border-radius: 5px; 
            position: relative;
            height: 50px;
            width: 5%;
        }
        .timer-display {
            position: absolute;
            bottom: 2px;
            left: 2px;
            right: 2px;
            font-size: 8px;
            background: rgba(0,0,0,0.7);
            color: white;
            border-radius: 2px;
            padding: 1px;
            text-align: center;
        }
        .debug-info { margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ è¡¨æ ¼ç”Ÿæˆè°ƒè¯•</h1>
    
    <div class="debug-info">
        <h3>è°ƒè¯•ä¿¡æ¯</h3>
        <p>è¡¨æ ¼çŠ¶æ€: <span id="table-status">æ£€æŸ¥ä¸­...</span></p>
        <p>å•å…ƒæ ¼æ•°é‡: <span id="cell-count">0</span></p>
        <p>å®šæ—¶å™¨å…ƒç´ æ•°é‡: <span id="timer-count">0</span></p>
    </div>
    
    <table id="debug-table">
        <tr>
            <th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th><th>H</th>
            <th>I</th><th>J</th><th>K</th><th>L</th><th>M</th><th>N</th><th>O</th><th>P</th>
            <th>Q</th><th>R</th><th>S</th><th>T</th>
        </tr>
    </table>

    <script type="module">
        import { TableManager } from './js/modules/tableManager.js';
        
        // æ¨¡æ‹Ÿäº‹ä»¶ç®¡ç†å™¨
        const mockEventManager = {
            addMobileTripleClickEvent: () => {},
            handleCellClick: () => {},
            handleCellRightClick: () => {},
            handleCellDoubleClick: () => {}
        };
        
        const tableManager = new TableManager();
        const table = document.getElementById('debug-table');
        
        try {
            console.log('å¼€å§‹ç”Ÿæˆè¡¨æ ¼...');
            tableManager.initializeTable(table, mockEventManager);
            
            // æ£€æŸ¥ç»“æœ
            const cells = table.querySelectorAll('td[data-line]');
            const timers = table.querySelectorAll('.timer-display');
            
            document.getElementById('table-status').textContent = 'âœ… ç”ŸæˆæˆåŠŸ';
            document.getElementById('cell-count').textContent = cells.length;
            document.getElementById('timer-count').textContent = timers.length;
            
            console.log(`è¡¨æ ¼ç”Ÿæˆå®Œæˆ: ${cells.length} ä¸ªå•å…ƒæ ¼, ${timers.length} ä¸ªå®šæ—¶å™¨`);
            
            // æµ‹è¯•å‡ ä¸ªå•å…ƒæ ¼
            if (cells.length > 0) {
                console.log('å‰5ä¸ªå•å…ƒæ ¼çš„data-lineå±æ€§:', 
                    Array.from(cells).slice(0, 5).map(c => c.dataset.line));
            }
            
        } catch (error) {
            console.error('è¡¨æ ¼ç”Ÿæˆå¤±è´¥:', error);
            document.getElementById('table-status').textContent = 'âŒ ç”Ÿæˆå¤±è´¥: ' + error.message;
        }
    </script>
</body>
</html>
